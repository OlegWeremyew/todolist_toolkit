(this.webpackJsonpmytodolist_toolkit=this.webpackJsonpmytodolist_toolkit||[]).push([[0],{100:function(t,e,a){t.exports={preloader:"App_preloader__181Gc"}},101:function(t,e,a){t.exports={pageNotFound:"PageNotFound_pageNotFound__OMvLJ"}},120:function(t,e,a){},147:function(t,e,a){"use strict";a.r(e);var n,c=a(0),i=a.n(c),o=(a(120),a(32)),r=a.n(o),s=a(18),l=a(52);!function(t){t.SET_STATUS="TODOLIST/APP_REDUCER/SET-STATUS",t.SET_ERROR="TODOLIST/APP_REDUCER/SET_ERROR",t.SET_INITIALIZED="TODOLIST/APP_REDUCER/SET_INITIALIZED"}(n||(n={}));var d,u=function(t){return{type:n.SET_ERROR,payload:{error:t}}},O=function(t){return{type:n.SET_STATUS,payload:{status:t}}},j=function(t){return{type:n.SET_INITIALIZED,payload:{isInitialized:t}}},T=a(14);!function(t){t.Loading="loading",t.Succeeded="succeeded",t.Idle="idle",t.Failed="failed"}(d||(d={}));var b,f,S,p,_,E,I={status:d.Idle,error:null,isInitialized:!1},h=a(90),m=a.n(h).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1/",headers:{"API-KEY":"f5a121b3-d5d2-4866-a73a-ab1418f0e4d8"}}),D=function(t){return m.post("/auth/login",t)},x=function(){return m.get("/auth/me")},g=function(){return m.delete("/auth/login")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(b||(b={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(f||(f={})),function(t){t[t.Success=0]="Success"}(S||(S={})),function(t){t.REQUIRED_PASSWORD="Password is required",t.INVALID_ADDRESS="Invalid email address",t.PASSWORD_LENGTH="Password should be more than 3 symbols",t.SOME_ERROR="Some error occurred",t.REQUIRED_EMAIL="Email is required"}(p||(p={})),function(t){t.MAIN_WINDOW="/",t.LOGIN="login",t.PAGE_NOT_FOUND="404",t.ERROR="*"}(_||(_={})),function(t){t.SET_IS_LOGGED_IN="TODOLIST/AUTH_REDUCER/SET_IS_LOGGED_IN"}(E||(E={}));var v,L=function(t){return{type:E.SET_IS_LOGGED_IN,payload:{value:t}}},y={isLoggedIn:!1},k=function(){return m.get("todo-lists/")},C=function(t){return m.post("todo-lists/",{title:t})},A=function(t,e){var a="todo-lists/".concat(t);return m.put(a,{title:e})},R=function(t){var e="todo-lists/".concat(t);return m.delete(e)},N=function(t){var e="todo-lists/".concat(t,"/tasks/");return m.get(e)},U=function(t,e){var a="todo-lists/".concat(t,"/tasks/").concat(e);return m.delete(a)},w=function(t,e){var a="todo-lists/".concat(t,"/tasks/");return m.post(a,{title:e})},G=function(t,e,a){var n="todo-lists/".concat(t,"/tasks/").concat(e);return m.put(n,a)},P=function(t,e){t.messages.length?e(u(t.messages[0])):e(u("Some error")),e(O(d.Failed))},F=function(t,e){e(u(t.message?t.message:"Some error")),e(O(d.Failed))},K=a(206),M=a(196),H=a(199),B=a(204),V=a(202),W=a(189),z=a(201),Z=a(194),Y=a(103),Q=a(15),q=function(t){return t.auth.isLoggedIn},J=a(1),$=function(){var t=Object(s.c)(q),e=Object(s.b)(),a=Object(Y.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email=p.INVALID_ADDRESS):e.email=p.REQUIRED_EMAIL,t.password?t.password.length<3&&(e.password=p.PASSWORD_LENGTH):e.password=p.REQUIRED_PASSWORD,e},onSubmit:function(t){var n;e((n=t,function(t){t(O(d.Loading)),D(n).then((function(e){e.data.resultCode===S.Success?(t(L(!0)),t(O(d.Succeeded))):P(e.data,t)})).catch((function(e){F(e,t)}))})),a.resetForm()}});return t?Object(J.jsx)(Q.a,{to:_.MAIN_WINDOW}):Object(J.jsx)(z.a,{container:!0,justifyContent:"center",children:Object(J.jsx)(z.a,{item:!0,justifyContent:"center",children:Object(J.jsxs)(H.a,{children:[Object(J.jsxs)(W.a,{children:[Object(J.jsxs)("p",{children:[Object(J.jsx)("span",{children:"To log in get registered "}),Object(J.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noreferrer",children:"here"})]}),Object(J.jsx)("p",{children:"or use common test account credentials:"}),Object(J.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(J.jsx)("p",{children:"Password: free"})]}),Object(J.jsx)("form",{onSubmit:a.handleSubmit,children:Object(J.jsxs)(V.a,{children:[Object(J.jsx)(Z.a,Object(T.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&Object(J.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(J.jsx)(Z.a,Object(T.a)({label:"Password",type:"password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&Object(J.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(J.jsx)(B.a,{label:"Remember me",control:Object(J.jsx)(M.a,Object(T.a)({},a.getFieldProps("rememberMe")))}),Object(J.jsx)(K.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})})})};!function(t){t.REMOVE_TASK="TODOLIST/TASK_REDUCER/REMOVE_TASK",t.ADD_TASK="TODOLIST/TASK_REDUCER/ADD_TASK",t.UPDATE_TASK="TODOLIST/TASK_REDUCER/UPDATE_TASK",t.SET_TASKS="TODOLIST/TASK_REDUCER/SET-TASKS"}(v||(v={}));var X,tt=function(t,e){return{type:v.REMOVE_TASK,payload:{taskId:t,todolistId:e}}},et=function(t){return{type:v.ADD_TASK,payload:{task:t}}},at=function(t,e,a){return{type:v.UPDATE_TASK,payload:{model:e,todolistId:a,taskId:t}}},nt=function(t,e){return{type:v.SET_TASKS,payload:{tasks:t,todolistId:e}}},ct=function(t,e,a){return function(n,c){var i=c().tasks[e].find((function(e){return e.id===t}));if(i){var o=Object(T.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},a);G(e,t,o).then((function(c){c.data.resultCode===S.Success?n(at(t,a,e)):P(c.data,n)})).catch((function(t){F(t,n)}))}}},it=a(16),ot=a(5);!function(t){t.REMOVE_TODOLIST="TODOLIST/TODOLIST_REDUCER/REMOVE-TODOLIST",t.ADD_TODOLIST="TODOLIST/TODOLIST_REDUCER/ADD_TODOLIST",t.CHANGE_TODOLIST_TITLE="TODOLIST/TODOLIST_REDUCER/CHANGE-TODOLIST-TITLE",t.CHANGE_TODOLIST_FILTER="TODOLIST/TODOLIST_REDUCER/CHANGE_TODOLIST_FILTER",t.CHANGE_TODOLIST_ENTITY_STATUS="TODOLIST/TODOLIST_REDUCER/CHANGE_TODOLIST_ENTITY_STATUS",t.SET_TODOS="TODOLIST/TODOLIST_REDUCER/SET_TODOS"}(X||(X={}));var rt={},st=a(207),lt=a(192),dt=a(75),ut=a.n(dt),Ot=a(13),jt=a(97),Tt=a.n(jt),bt=i.a.memo((function(t){var e=t.value,a=t.onChange,n=Object(c.useState)(!1),i=Object(Ot.a)(n,2),o=i[0],r=i[1],s=Object(c.useState)(e),l=Object(Ot.a)(s,2),d=l[0],u=l[1];return o?Object(J.jsx)(Z.a,{variant:"standard",value:d,onChange:function(t){u(t.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),a(d)}}):Object(J.jsx)("span",{onDoubleClick:function(){r(!0),u(e)},className:Tt.a.text,children:e})})),ft=i.a.memo((function(t){var e=t.task,a=t.removeTask,n=t.todolistId,i=t.changeTaskStatus,o=t.changeTaskTitle,r=Object(c.useCallback)((function(){a(e.id,n)}),[e.id,n,a]),s=Object(c.useCallback)((function(t){var a=t.currentTarget.checked;i(e.id,a?b.Completed:b.New,n)}),[e.id,n,i]),l=Object(c.useCallback)((function(t){o(e.id,t,n)}),[e.id,n,o]);return Object(J.jsx)("div",{className:e.status===b.Completed?"is-done":"",children:Object(J.jsxs)("div",{className:ut.a.containerTask,children:[Object(J.jsxs)("div",{className:ut.a.mainBlock,children:[Object(J.jsx)(M.a,{checked:e.status===b.Completed,color:"primary",onChange:s}),Object(J.jsx)(bt,{value:e.title,onChange:l})]}),Object(J.jsx)(st.a,{onClick:r,size:"small",children:Object(J.jsx)(lt.a,{fontSize:"inherit"})})]})},e.id)})),St=a(98),pt=a(99),_t=a.n(pt),Et=a(193),It=i.a.memo((function(t){var e=t.addItem,a=t.label,n=t.disabled,i=void 0!==n&&n,o=Object(c.useState)(""),r=Object(Ot.a)(o,2),s=r[0],l=r[1],d=Object(c.useState)(!1),u=Object(Ot.a)(d,2),O=u[0],j=u[1],T=function(){""!==s.trim()?(e(s),l("")):j(!0)};return Object(J.jsxs)("div",{children:[Object(J.jsx)(Z.a,{disabled:i,variant:"standard",error:O,size:"small",value:s,onChange:function(t){l(t.currentTarget.value)},onKeyPress:function(t){j(!1),"Enter"===t.key&&T()},label:O?"Title is required":a}),Object(J.jsx)(st.a,{color:"primary",onClick:T,disabled:i,children:Object(J.jsx)(Et.a,{})})]})})),ht=["changeTaskStatus","addTaskCallBack","todolist","removeTodolistCallBack","changeTodolistTitleCallBack","changeTaskTitle","removeTask","changeFilterCallBack"],mt=i.a.memo((function(t){var e=t.changeTaskStatus,a=t.addTaskCallBack,n=t.todolist,i=t.removeTodolistCallBack,o=t.changeTodolistTitleCallBack,r=t.changeTaskTitle,l=t.removeTask,u=t.changeFilterCallBack,j=Object(St.a)(t,ht),T=Object(s.b)();Object(c.useEffect)((function(){var t;T((t=n.id,function(e){e(O(d.Loading)),N(t).then((function(a){var n=a.data.items;e(nt(n,t)),e(O(d.Succeeded))}))}))}),[T,n.id]);var f=Object(c.useCallback)((function(t){a(t,n.id)}),[a,n.id]),S=Object(c.useCallback)((function(){i(n.id)}),[i,n.id]),p=Object(c.useCallback)((function(t){o(n.id,t)}),[o,n.id]),_=Object(c.useCallback)((function(t){u(t,n.id)}),[u,n.id]),E=j.tasks;return"active"===n.filter&&(E=E.filter((function(t){return t.status===b.New}))),"completed"===n.filter&&(E=E.filter((function(t){return t.status===b.Completed}))),Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{className:_t.a.todolist__title,children:[Object(J.jsx)(bt,{value:n.title,onChange:p}),Object(J.jsx)(st.a,{onClick:S,disabled:n.entityStatus===d.Loading,children:Object(J.jsx)(lt.a,{})})]}),Object(J.jsx)(It,{label:"Name task",addItem:f,disabled:n.entityStatus===d.Loading}),Object(J.jsx)("div",{children:E.map((function(t){return Object(J.jsx)(ft,{todolistId:n.id,task:t,removeTask:l,changeTaskStatus:e,changeTaskTitle:r},t.id)}))}),Object(J.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(J.jsx)(K.a,{variant:"all"===n.filter?"outlined":"text",onClick:function(){return _("all")},color:"success",children:"All"}),Object(J.jsx)(K.a,{variant:"active"===n.filter?"outlined":"text",onClick:function(){return _("active")},color:"primary",children:"Active"}),Object(J.jsx)(K.a,{variant:"completed"===n.filter?"outlined":"text",onClick:function(){return _("completed")},color:"secondary",children:"Completed"})]})]})})),Dt=[],xt=function(t){return{type:X.REMOVE_TODOLIST,payload:{id:t}}},gt=function(t){return{type:X.ADD_TODOLIST,payload:{todolist:t}}},vt=function(t,e){return{type:X.CHANGE_TODOLIST_TITLE,payload:{id:t,title:e}}},Lt=function(t,e){return{type:X.CHANGE_TODOLIST_FILTER,payload:{id:t,filter:e}}},yt=function(t){return{type:X.SET_TODOS,payload:{todos:t}}},kt=function(t,e){return{type:X.CHANGE_TODOLIST_ENTITY_STATUS,payload:{id:t,status:e}}},Ct=a(203),At=a(66),Rt=a.n(At),Nt=function(t){return t.tasks},Ut=function(t){return t.todolists},wt=function(){var t=Object(s.b)(),e=Object(s.c)(Ut),a=Object(s.c)(Nt),n=Object(s.c)(q);Object(c.useEffect)((function(){n&&t((function(t){t(O(d.Loading)),k().then((function(e){t(yt(e.data)),t(O(d.Succeeded))}))}))}),[n,t]);var i=Object(c.useCallback)((function(e,a){t(function(t,e){return function(a){a(O(d.Loading)),U(e,t).then((function(){a(tt(t,e)),a(O(d.Succeeded))}))}}(e,a))}),[t]),o=Object(c.useCallback)((function(e,a){t(function(t,e){return function(a){a(O(d.Loading)),w(t,e).then((function(t){if(t.data.resultCode===S.Success){var e=t.data.data.item;a(et(e)),a(O(d.Succeeded))}else P(t.data,a)})).catch((function(t){F(t,a)}))}}(a,e))}),[t]),r=Object(c.useCallback)((function(e,a,n){t(ct(e,n,{status:a}))}),[t]),l=Object(c.useCallback)((function(e,a,n){t(ct(e,n,{title:a}))}),[t]),u=Object(c.useCallback)((function(e,a){t(Lt(a,e))}),[t]),j=Object(c.useCallback)((function(e){var a;t((a=e,function(t){t(O(d.Loading)),t(kt(a,d.Loading)),R(a).then((function(){t(xt(a)),t(O(d.Succeeded))}))}))}),[t]),T=Object(c.useCallback)((function(e,a){t(function(t,e){return function(a){a(O(d.Loading)),A(t,e).then((function(){a(vt(t,e)),a(O(d.Succeeded))}))}}(e,a))}),[t]),b=Object(c.useCallback)((function(e){t(function(t){return function(e){e(O(d.Loading)),C(t).then((function(t){e(gt(t.data.data.item)),e(O(d.Succeeded))}))}}(e))}),[t]);return n?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(z.a,{container:!0,className:Rt.a.gridForm,children:Object(J.jsx)(It,{label:"Name todolist",addItem:b})}),Object(J.jsx)(z.a,{container:!0,spacing:3,className:Rt.a.gridTodolist,children:e.map((function(t){return Object(J.jsx)(z.a,{item:!0,children:Object(J.jsx)(Ct.a,{className:Rt.a.paperStyle,children:Object(J.jsx)(mt,{todolist:t,tasks:a[t.id],removeTask:i,changeFilterCallBack:u,addTaskCallBack:o,changeTaskStatus:r,removeTodolistCallBack:j,changeTaskTitle:l,changeTodolistTitleCallBack:T})})},t.id)}))})]}):Object(J.jsx)(Q.a,{to:_.LOGIN})},Gt=a(212),Pt=a(213),Ft=a(100),Kt=a.n(Ft),Mt=a(208),Ht=a(209),Bt=a(210),Vt=a(205),Wt=a(211),zt=function(t){return t.app.isInitialized},Zt=function(t){return t.app.status},Yt=function(t){return t.app.error},Qt=function(){var t=Object(s.b)(),e=Object(s.c)(Zt),a=Object(s.c)(q);return Object(J.jsx)(Mt.a,{sx:{flexGrow:1},children:Object(J.jsxs)(Ht.a,{position:"static",children:[Object(J.jsxs)(Bt.a,{children:[Object(J.jsx)(st.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(J.jsx)(Vt.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Todolist"}),a&&Object(J.jsx)(K.a,{variant:"outlined",onClick:function(){t((function(t){g().then((function(e){e.data.resultCode===S.Success?(t(L(!1)),t(O(d.Succeeded))):P(e.data,t)})).catch((function(e){F(e,t)}))}))},color:"inherit",children:"Logout"})]}),"loading"===e&&Object(J.jsx)(Wt.a,{})]})})},qt=a(198),Jt=a(197),$t=c.forwardRef((function(t,e){return Object(J.jsx)(Jt.a,Object(T.a)({elevation:6,ref:e,variant:"filled"},t))})),Xt=function(){var t=Object(s.b)(),e=Object(s.c)(Yt),a=function(e,a){"clickaway"!==a&&t(u(null))},n=null!==e;return Object(J.jsx)(qt.a,{open:n,autoHideDuration:6e3,onClose:a,children:Object(J.jsx)($t,{onClose:a,severity:"error",sx:{width:"100%"},children:e})})},te=a(101),ee=a.n(te),ae=function(){return Object(J.jsx)("h1",{className:ee.a.pageNotFound,children:"404. Page not found"})},ne=function(){var t=Object(s.b)(),e=Object(s.c)(zt);return Object(c.useEffect)((function(){t((function(t){x().then((function(e){e.data.resultCode===S.Success&&t(L(!0))})).finally((function(){t(j(!0))}))}))}),[t,e]),e?Object(J.jsxs)("div",{children:[Object(J.jsx)(Xt,{}),Object(J.jsx)(Qt,{}),Object(J.jsx)(Pt.a,{fixed:!0,children:Object(J.jsxs)(Q.d,{children:[Object(J.jsx)(Q.b,{path:_.MAIN_WINDOW,element:Object(J.jsx)(wt,{})}),Object(J.jsx)(Q.b,{path:_.LOGIN,element:Object(J.jsx)($,{})}),Object(J.jsx)(Q.b,{path:_.PAGE_NOT_FOUND,element:Object(J.jsx)(ae,{})}),Object(J.jsx)(Q.b,{path:_.ERROR,element:Object(J.jsx)(Q.a,{to:_.PAGE_NOT_FOUND})})]})})]}):Object(J.jsx)("div",{className:Kt.a.preloader,children:Object(J.jsx)(Gt.a,{})})},ce=a(67),ie=a(102),oe=Object(ce.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v.REMOVE_TASK:return Object(T.a)(Object(T.a)({},t),{},Object(ot.a)({},e.payload.todolistId,t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskId}))));case v.ADD_TASK:return Object(T.a)(Object(T.a)({},t),{},Object(ot.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(it.a)(t[e.payload.task.todoListId]))));case v.UPDATE_TASK:return Object(T.a)(Object(T.a)({},t),{},Object(ot.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(T.a)(Object(T.a)({},t),e.payload.model):t}))));case X.ADD_TODOLIST:return Object(T.a)(Object(T.a)({},t),{},Object(ot.a)({},e.payload.todolist.id,[]));case X.REMOVE_TODOLIST:var a=Object(T.a)({},t);return delete a[e.payload.id],a;case X.SET_TODOS:var n=Object(T.a)({},t);return e.payload.todos.forEach((function(t){n[t.id]=[]})),n;case v.SET_TASKS:return Object(T.a)(Object(T.a)({},t),{},Object(ot.a)({},e.payload.todolistId,e.payload.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case X.REMOVE_TODOLIST:return t.filter((function(t){return t.id!==e.payload.id}));case X.ADD_TODOLIST:return[Object(T.a)(Object(T.a)({},e.payload.todolist),{},{filter:"all",entityStatus:d.Idle})].concat(Object(it.a)(t));case X.CHANGE_TODOLIST_TITLE:return t.map((function(t){return t.id===e.payload.id?Object(T.a)(Object(T.a)({},t),{},{title:e.payload.title}):t}));case X.CHANGE_TODOLIST_FILTER:return t.map((function(t){return t.id===e.payload.id?Object(T.a)(Object(T.a)({},t),{},{filter:e.payload.filter}):t}));case X.CHANGE_TODOLIST_ENTITY_STATUS:return t.map((function(t){return t.id===e.payload.id?Object(T.a)(Object(T.a)({},t),{},{entityStatus:e.payload.status}):t}));case X.SET_TODOS:return e.payload.todos.map((function(t){return Object(T.a)(Object(T.a)({},t),{},{filter:"all",entityStatus:d.Idle})}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.SET_STATUS:return Object(T.a)(Object(T.a)({},t),{},{status:e.payload.status});case n.SET_ERROR:return Object(T.a)(Object(T.a)({},t),{},{error:e.payload.error});case n.SET_INITIALIZED:return Object(T.a)(Object(T.a)({},t),{},{isInitialized:e.payload.isInitialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;return e.type===E.SET_IS_LOGGED_IN?Object(T.a)(Object(T.a)({},t),{},{isLoggedIn:e.payload.value}):t}}),re=Object(ce.c)(oe,Object(ce.a)(ie.a));window.store=re,r.a.render(Object(J.jsx)(l.a,{children:Object(J.jsx)(s.a,{store:re,children:Object(J.jsx)(ne,{})})}),document.getElementById("root"))},66:function(t,e,a){t.exports={gridForm:"TodolistList_gridForm__39fVs",gridTodolist:"TodolistList_gridTodolist__2vFp3",paperStyle:"TodolistList_paperStyle__IvGUR"}},75:function(t,e,a){t.exports={containerTask:"Task_containerTask__1g-kS"}},97:function(t,e,a){t.exports={text:"EditableSpan_text__150Yx"}},99:function(t,e,a){t.exports={todolist__title:"TodolistList_todolist__title__1CudV"}}},[[147,1,2]]]);
//# sourceMappingURL=main.d3db5628.chunk.js.map